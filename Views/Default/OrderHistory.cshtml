@model List<DoAn_web.Models.Order>
@{
    ViewBag.Title = "Lịch sử mua hàng";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}

@* 1. Tải file CSS (đảm bảo tên file đúng) *@
<link href="~/Content/style_K/Style_OrderHistory.css" rel="stylesheet" />

@* 2. Thay "container" bằng "history-container" và bỏ style inline *@
<div class="history-container">
    <h2>Lịch sử mua hàng</h2>
    <hr />

    @if (!Model.Any())
    {
        <p>Bạn chưa có đơn hàng nào.</p>
    }
    else
    {
        foreach (var order in Model)
        {
            @* 3. Thay "panel" bằng "order-card" *@
            <div class="order-card">

                @* 4. Thay "panel-heading" bằng "order-card-header" *@
                <div class="order-card-header">
                    @* 5. Tách <h4> thành 2 phần (thay cho pull-right) *@
                    <span class="order-id">Đơn hàng #@order.OrderID</span>
                    <span class="order-total-price">Tổng tiền: @String.Format("{0:N0}", order.TotalAmount) đ</span>
                </div>

                @* 6. Thay "panel-body" bằng "order-card-body" *@
                <div class="order-card-body">
                    <p><strong>Ngày đặt:</strong> @order.OrderDate.ToString("dd/MM/yyyy")</p>
                    <p><strong>Giao đến:</strong> @order.AddressDelivery</p>
                    <p><strong>Trạng thái:</strong> @order.PaymentStatus</p>

                    <h5>Chi tiết sản phẩm:</h5>

                    @* 7. Thay "table" bằng "order-detail-table" *@
                    <table class="order-detail-table">
                        @foreach (var detail in order.OrderDetails)
                        {
                            <tr>
                                <td>@detail.Product.ProductName</td>
                                <td>Số lượng: @detail.Quantity</td>
                                <td>@String.Format("{0:N0}", detail.UnitPrice) đ</td>
                            </tr>
                        }
                    </table>
                </div>
            </div>
        }
    }
</div>